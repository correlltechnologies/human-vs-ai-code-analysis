# Human vs AI Code Analysis

![Python](https://img.shields.io/badge/python-3.8+-blue.svg)
![Dataset](https://img.shields.io/badge/dataset-HuggingFace-yellow.svg)

An empirical research project analyzing stylistic, structural, and semantic differences between human-written code and AI-generated code using the OSS-forge/HumanVsAICode dataset. This project implements a comprehensive multi-stage analysis pipeline combining traditional code metrics, cyclomatic complexity analysis, and modern embedding-based visualizations.

## Overview

This repository provides a reproducible framework for comparing code authorship patterns across human developers and multiple AI code generation models (ChatGPT, DeepSeek Coder, and Qwen). The analysis leverages both traditional software engineering metrics and modern machine learning techniques to identify distinguishing characteristics.

## Features

- **Structural Metrics Extraction**: Automated extraction of code complexity metrics including:
  - Lines of code (LOC)
  - Average line length
  - Comment density
  - Indentation depth patterns
  - Function count and distribution
  - Variable naming conventions
  - Cyclomatic complexity (via radon)
  - Normalized complexity scores

- **Semantic Embeddings**: Generate high-quality code embeddings using OpenAI's text-embedding-3-small model for capturing semantic patterns beyond surface-level syntax

- **Visualization Suite**: Comprehensive visualization tools including:
  - Statistical comparison plots (boxplots, distributions)
  - UMAP dimensionality reduction for embedding visualization
  - Human vs AI clustering analysis
  - Model-specific pattern identification

- **Performance Optimized**: CPU-optimized parallel processing for large-scale dataset analysis

## Project Structure

```
human-vs-ai-code-analysis/
├── 01_extract_features.py      # Extract structural & complexity metrics
├── 02_generate_embeddings.py   # Generate OpenAI embeddings
├── 03_visualize_structure.py   # Visualize structural features
├── 04_visualize_umap.py        # Create UMAP visualizations
├── requirements.txt             # Python dependencies
├── results/                     # Output directory (auto-created)
│   ├── structural_features.csv
│   ├── embeddings.npy
├── visualizations/ 
└── README.md
```

## Installation

### Prerequisites

- Python 3.8 or higher
- OpenAI API key (for embedding generation)

### Setup

1. Clone this repository:
```bash
git clone https://github.com/correlltechnologies/human-vs-ai-code-analysis.git
cd human-vs-ai-code-analysis
```

2. Create and activate a virtual environment (recommended):
```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

3. Install required dependencies:
```bash
pip install -r requirements.txt
```

4. Set up OpenAI API credentials:
```bash
# Create a .env file in the project root
echo "OPENAI_API_KEY=your_api_key_here" > .env
```

## Usage

The analysis pipeline consists of four sequential stages. Run each script in order:

### Stage 1: Feature Extraction
Extract structural and complexity metrics from the dataset:
```bash
python 01_extract_features.py
```
**Output**: `results/structural_features.csv`

### Stage 2: Generate Embeddings
Generate semantic embeddings using OpenAI's API:
```bash
python 02_generate_embeddings.py
```
**Output**: `results/sample_embeddings.csv`

**Note**: This stage requires an OpenAI API key and will incur API costs based on usage. If you have a good GPU, consider using CODEBERT locally.

### Stage 3: Visualize Structural Features
Create statistical visualizations of code metrics:
```bash
python 03_visualize_structure.py
```
**Output**: Distribution plots and comparison charts in `results/`

### Stage 4: UMAP Visualization
Generate dimensionality reduction visualizations of code embeddings:
```bash
python 04_visualize_umap.py
```
**Output**: UMAP cluster visualizations in `results/`

## Dataset

This project uses the [OSS-forge/HumanVsAICode](https://huggingface.co/datasets/OSS-forge/HumanVsAICode) dataset from Hugging Face, which contains:

- **Human-written code**: Real-world Python code from open-source projects
- **AI-generated code**: Equivalent implementations generated by:
  - ChatGPT
  - DeepSeek
  - Qwen

Each sample includes the code snippet and authorship label, enabling direct comparison of coding patterns across different authorship types.

## Performance Notes

- Feature extraction is CPU-optimized using all available cores
- Embedding generation uses batched API calls with rate limit handling
- Expected runtime varies based on dataset size and hardware
- Large datasets may require 1-2 hours for complete pipeline execution

## Contributing

Please feel free to submit issues, fork the repository, and create pull requests. Some future ideas include a classification model or additional metrics and visualizations.
